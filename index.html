<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false,"avatar":"/images/avatar.png","url":null,"rounded":false,"rotated":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="记录生活，努力学习。">
<meta property="og:type" content="website">
<meta property="og:title" content="Mr-programming">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Mr-programming">
<meta property="og:description" content="记录生活，努力学习。">
<meta property="og:locale">
<meta property="article:author" content="Mr-programming">
<meta property="article:tag" content="前端、学习、提升、建站、努力。">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>Mr-programming</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">

  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="تشغيل شريط التصفح">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Mr-programming</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">gogogo</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>首&emsp;页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="user fa-fw"></i>关于博主</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>归&emsp;档</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>标&emsp;签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>分&emsp;类</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/09/03/Vue2%E7%BB%84%E4%BB%B6%E9%97%B4%E9%80%9A%E4%BF%A1---%E5%AD%90%E4%BC%A0%E7%88%B6%E5%80%BC%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="博主">
      <meta itemprop="description" content="记录生活，努力学习。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr-programming">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/03/Vue2%E7%BB%84%E4%BB%B6%E9%97%B4%E9%80%9A%E4%BF%A1---%E5%AD%90%E4%BC%A0%E7%88%B6%E5%80%BC%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6/" class="post-title-link" itemprop="url">Vue2组件间通信---子传父值自定义事件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建于：2021-09-03 10:17:10 / 更新于：11:48:41" itemprop="dateCreated datePublished" datetime="2021-09-03T10:17:10+08:00">2021-09-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%85%B3%E4%BA%8EVue/" itemprop="url" rel="index"><span itemprop="name">关于Vue</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Vue2中组件间通信系列，本篇是关于子组件向父组件传值的介绍，这里我会用通俗的语言帮助大家理解自定义事件</p>
<hr>
<h3 id="功能："><a href="#功能：" class="headerlink" title="功能："></a>功能：</h3><p>父组件可以接受到子组件传递的数据，适用于组件间通信。</p>
<hr>
<h3 id="原理："><a href="#原理：" class="headerlink" title="原理："></a>原理：</h3><p>子组件要给父组件传递数据，此时要在父组件中给子组件绑定一个自定义事件，回调写在父组件中。那么触发这个自定义事件的就是子组件，传递的参数就是子组件要给父组件传递的数据。</p>
<hr>
<h3 id="绑定自定义事件的两种方式："><a href="#绑定自定义事件的两种方式：" class="headerlink" title="绑定自定义事件的两种方式："></a>绑定自定义事件的两种方式：</h3><ul>
<li><h5 id="第一种方式："><a href="#第一种方式：" class="headerlink" title="第一种方式："></a>第一种方式：</h5></li>
</ul>
<p>父组件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Son</span> @<span class="attr">show</span>=<span class="string">&quot;showName&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> Son <span class="keyword">from</span> <span class="string">&#x27;./Son.vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;Father&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="function"><span class="title">showName</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(name)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">components</span>:&#123;</span><br><span class="line">    Son</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>子组件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;Son&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.$emit(<span class="string">&#x27;show&#x27;</span>,<span class="string">&quot;Son子组件&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">控制台结果：</span><br><span class="line"></span><br><span class="line">Son子组件</span><br></pre></td></tr></table></figure>



<ul>
<li><h5 id="第二种方式："><a href="#第二种方式：" class="headerlink" title="第二种方式："></a>第二种方式：</h5></li>
</ul>
<p>父组件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Son</span> <span class="attr">ref</span>=<span class="string">&quot;MySon&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> Son <span class="keyword">from</span> <span class="string">&#x27;./Son.vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">name</span>:<span class="string">&#x27;Father&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">ShowName</span>(<span class="params">name</span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="built_in">console</span>.log(name)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="built_in">this</span>.$refs.MySon.$on(<span class="string">&#x27;show&#x27;</span>,<span class="built_in">this</span>.ShowName)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">components</span>:&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Son</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>子组件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"> <span class="xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;toFather&quot;</span>&gt;</span>为Father传值<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">name</span>:<span class="string">&#x27;Son&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">toFather</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="built_in">this</span>.$emit(<span class="string">&#x27;show&#x27;</span>,<span class="string">&quot;Son子组件&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">控制台结果：</span><br><span class="line"></span><br><span class="line">Son子组件</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="区别-小坑-："><a href="#区别-小坑-：" class="headerlink" title="区别(小坑)："></a>区别(小坑)：</h3><p>两种方式的目的都是为了子传父值，不过在这里需要注意的是第二种方式在为子组件绑定自定义事件的时机与第一种方式不同，第二种是在整个页面挂载之后对子组件绑定自定义事件，而Vue的执行机制是子组件比父组件先进行渲染，也就是说子组件都已经渲染完毕了之后我们才给它绑定自定义事件，所以子组件中触发自定义事件的函数不可以在mounted钩子中执行。通俗点说就是子组件比父组件先进行渲染，子组件的mounted函数比父组件的先执行，在执行的时候父组件的自定义事件还没有绑定(查无此人)。所以在示例中对于第二种方式我们在子组件中用按钮去触发自定义事件。</p>
<h3 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h3><ol>
<li> 我们最好在组件销毁之前对自定义事件进行解绑，this.$off (‘自定义事件’), 这一过程可以在beforeDestroy钩子中执行</li>
<li> 对于绑定原生DOM事件也可以用native修饰符修饰  如： @click.native=”…” 这样click事件就变成了原生Dom事件不会被当做自定义事件执行。</li>
<li> 注意点：对于第二种方式绑定自定义事件的回调函数要么写成命名函数的方式到methods中，要么写成箭头函数的形式，否则this指向不是组件实例。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/09/02/Vue2%E7%BB%84%E4%BB%B6%E9%97%B4%E9%80%9A%E4%BF%A1---%E7%88%B6%E4%BC%A0%E5%AD%90%E5%80%BCprops/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="博主">
      <meta itemprop="description" content="记录生活，努力学习。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr-programming">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/02/Vue2%E7%BB%84%E4%BB%B6%E9%97%B4%E9%80%9A%E4%BF%A1---%E7%88%B6%E4%BC%A0%E5%AD%90%E5%80%BCprops/" class="post-title-link" itemprop="url">Vue2组件间通信——父传子值props</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建于：2021-09-02 09:44:57 / 更新于：11:15:41" itemprop="dateCreated datePublished" datetime="2021-09-02T09:44:57+08:00">2021-09-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%85%B3%E4%BA%8EVue/" itemprop="url" rel="index"><span itemprop="name">关于Vue</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Vue2中组件间通信系列，本篇是关于父组件向子组件传值的介绍，这里我会用通俗的语言帮助大家理解props配置项</p>
<hr>
<h3 id="功能："><a href="#功能：" class="headerlink" title="功能："></a>功能：</h3><p>子组件可以接收到父组件传递的数据信息，适用于组件间通信，对于父传子props配置相相对来说是较为方便的</p>
<hr>
<h3 id="传递方式："><a href="#传递方式：" class="headerlink" title="传递方式："></a>传递方式：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Son</span> <span class="attr">:msg</span>=<span class="string">&quot;Str&quot;</span> <span class="attr">:Job</span>=<span class="string">&#x27;job&#x27;</span>/&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> Son <span class="keyword">from</span> <span class="string">&#x27;./Son.vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">name</span>:<span class="string">&#x27;Father&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">Str</span>:<span class="string">&#x27;hello&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">job</span>:&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">salary</span>:<span class="string">&#x27;30k&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">components</span>:&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Son</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">传递方式很简单，只需在子组件中传入父组件想传递的信息即可，msg和Job是我们的自定义写法，不过要注意的是在前面要加v-bind指令，</span><br><span class="line">不然“ ”中的值会被当做字符串传入Son组件中</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="接受方式："><a href="#接受方式：" class="headerlink" title="接受方式："></a>接受方式：</h3><ul>
<li><h5 id="数组类型的接收方式"><a href="#数组类型的接收方式" class="headerlink" title="数组类型的接收方式"></a>数组类型的接收方式</h5></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;Son&#x27;</span>,</span><br><span class="line">  <span class="attr">props</span>:[<span class="string">&#x27;msg&#x27;</span>,<span class="string">&#x27;Job&#x27;</span>],</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.msg)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.Job)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">打印结果：</span><br><span class="line"></span><br><span class="line">hello</span><br><span class="line"></span><br><span class="line">&#123;<span class="attr">__ob__</span>: Observer&#125;</span><br><span class="line"><span class="attr">salary</span>: <span class="string">&quot;30k&quot;</span></span><br><span class="line"><span class="attr">__ob__</span>: Observer &#123;<span class="attr">value</span>: &#123;…&#125;, <span class="attr">dep</span>: Dep, <span class="attr">vmCount</span>: <span class="number">0</span>&#125;</span><br><span class="line">get salary: ƒ reactiveGetter()</span><br><span class="line">set salary: ƒ reactiveSetter(newVal)</span><br><span class="line">[[Prototype]]: <span class="built_in">Object</span></span><br><span class="line"></span><br><span class="line">用数组的形式来接收传递过来的信息看起来起来像是傻瓜形式的接受，因为我们并没有对接受结果做限制。我们可以看到在钩子里可以使用</span><br><span class="line"><span class="built_in">this</span>来拿到数据，所以说传递过来的信息也是在组件实例身上的。</span><br></pre></td></tr></table></figure>

<ul>
<li><h5 id="带有限制的接收方式"><a href="#带有限制的接收方式" class="headerlink" title="带有限制的接收方式"></a>带有限制的接收方式</h5></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;Son&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">props</span>:&#123;</span><br><span class="line">    <span class="attr">msg</span>:&#123;</span><br><span class="line">      <span class="attr">type</span>:<span class="built_in">String</span>,      <span class="comment">//类型</span></span><br><span class="line">      <span class="attr">required</span>:<span class="literal">false</span>,   <span class="comment">//是否必填</span></span><br><span class="line">      <span class="attr">default</span>:<span class="string">&#x27;你好&#x27;</span>     <span class="comment">//默认值</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">Job</span>:<span class="built_in">Object</span>			<span class="comment">//简写</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.msg)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.Job)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">打印结果：</span><br><span class="line"></span><br><span class="line">你好</span><br><span class="line"></span><br><span class="line">&#123;<span class="attr">__ob__</span>: Observer&#125;</span><br><span class="line"><span class="attr">salary</span>: <span class="string">&quot;30k&quot;</span></span><br><span class="line"><span class="attr">__ob__</span>: Observer &#123;<span class="attr">value</span>: &#123;…&#125;, <span class="attr">dep</span>: Dep, <span class="attr">vmCount</span>: <span class="number">0</span>&#125;</span><br><span class="line">get salary: ƒ reactiveGetter()</span><br><span class="line">set salary: ƒ reactiveSetter(newVal)</span><br><span class="line">[[Prototype]]: <span class="built_in">Object</span></span><br><span class="line"></span><br><span class="line">相比于数组类型接收数据，采用配置对象的形式来接收数据可以很好地限制父组件传递过来的数据信息。上面在父组件中并没有传递msg，所以</span><br><span class="line">msg打印出的结果是配置项中的默认值 你好</span><br></pre></td></tr></table></figure>



<p>这里我们可能有个疑问，父向子传递数据之后 子组件会永久存储着传递过来的数据吗？对于不同的父组件呢？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Father</span>/&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Son</span> <span class="attr">:msg</span>=<span class="string">&quot;Str2&quot;</span> <span class="attr">:Job</span>=<span class="string">&quot;myjob&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> Father <span class="keyword">from</span> <span class="string">&#x27;./components/Father.vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> Son <span class="keyword">from</span> <span class="string">&#x27;./components/Son.vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">name</span>:<span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">Str2</span>:<span class="string">&#x27;world&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">myjob</span>:&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">salary</span>:<span class="string">&#x27;10k&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">components</span>:&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  Father,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  Son</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">打印结果：</span><br><span class="line"></span><br><span class="line">你好</span><br><span class="line"></span><br><span class="line">&#123;<span class="attr">__ob__</span>: Observer&#125;</span><br><span class="line"><span class="attr">salary</span>: <span class="string">&quot;30k&quot;</span></span><br><span class="line"><span class="attr">__ob__</span>: Observer &#123;<span class="attr">value</span>: &#123;…&#125;, <span class="attr">dep</span>: Dep, <span class="attr">vmCount</span>: <span class="number">0</span>&#125;</span><br><span class="line">get salary: ƒ reactiveGetter()</span><br><span class="line">set salary: ƒ reactiveSetter(newVal)</span><br><span class="line">[[Prototype]]: <span class="built_in">Object</span></span><br><span class="line"></span><br><span class="line">world</span><br><span class="line"></span><br><span class="line">&#123;<span class="attr">__ob__</span>: Observer&#125;</span><br><span class="line"><span class="attr">salary</span>: <span class="string">&quot;10k&quot;</span></span><br><span class="line"><span class="attr">__ob__</span>: Observer &#123;<span class="attr">value</span>: &#123;…&#125;, <span class="attr">dep</span>: Dep, <span class="attr">vmCount</span>: <span class="number">0</span>&#125;</span><br><span class="line">get salary: ƒ reactiveGetter()</span><br><span class="line">set salary: ƒ reactiveSetter(newVal)</span><br><span class="line">[[Prototype]]: <span class="built_in">Object</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>​     这里我们在App组件中也向Son组建中传递了相关数据，我们可以看出控制台分别打印了两次 msg和Job 的结果。 很明显Son组件作为子组件对于Faher组件和App组件分别挂载了一次，对应的mounted钩子也分别执行一次，每次打印的信息都是对应父组件传递的相关数据。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/08/31/Vue3%E4%B8%AD%E7%9A%84%E7%9A%84ref%E5%87%BD%E6%95%B0%E5%92%8Creactive%E5%87%BD%E6%95%B0%E5%8F%8A%E5%85%B6%E6%B5%85%E5%B1%82%E6%AC%A1%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="博主">
      <meta itemprop="description" content="记录生活，努力学习。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr-programming">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/31/Vue3%E4%B8%AD%E7%9A%84%E7%9A%84ref%E5%87%BD%E6%95%B0%E5%92%8Creactive%E5%87%BD%E6%95%B0%E5%8F%8A%E5%85%B6%E6%B5%85%E5%B1%82%E6%AC%A1%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86/" class="post-title-link" itemprop="url">Vue3中的的ref函数和reactive函数及其浅层次响应式原理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建于：2021-08-31 14:38:00" itemprop="dateCreated datePublished" datetime="2021-08-31T14:38:00+08:00">2021-08-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">عُدل في</span>
                <time title="更新于：2021-09-02 11:10:21" itemprop="dateModified" datetime="2021-09-02T11:10:21+08:00">2021-09-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%85%B3%E4%BA%8EVue/" itemprop="url" rel="index"><span itemprop="name">关于Vue</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>​        在这里我会用通俗易懂的语言和浅层次的原理来帮助学习Vue的小伙伴去理解ref函数和reactive函数和二者的区别以及其响应式原理，帮助大家少走弯路。这里对于不会描述底层核心代码，想了解底层原理的小伙伴可以去看上篇。</p>
<hr>
<h3 id="ref函数："><a href="#ref函数：" class="headerlink" title="ref函数："></a>ref函数：</h3><p><strong>语法：const xxx = ref (initValue)<br>接受的数据类型：基本类型，对象类型<br>作用：把参数加工成一个响应式对象，全称为reference对象(我们下面一律简称为ref对象)<br>核心原理：响应式依赖Object.defineProperty( )的get( )和set( )</strong></p>
<hr>
<h5 id="Ref函数对于基本数据类型的参数"><a href="#Ref函数对于基本数据类型的参数" class="headerlink" title="Ref函数对于基本数据类型的参数"></a>Ref函数对于基本数据类型的参数</h5><ul>
<li><h6 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h6></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;Str&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> Str =ref(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">      Str</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">  这里我们定义了一个Str变量来接收ref加工生成的ref对象，我们都知道对象的数据都是以键值对的形式存储的，但是在这里为什么直接把Str给<span class="keyword">return</span>出去，</span><br><span class="line">并且模板里可以直接写Str这个对象呢,我们的源数据呢？带着这个疑问我们来输出一下Str</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> Str =ref(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(Str)</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">      Str</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">打印结果如下：</span><br><span class="line">RefImpl</span><br><span class="line"><span class="attr">__v_isRef</span>: <span class="literal">true</span></span><br><span class="line"><span class="attr">_rawValue</span>: <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="attr">_shallow</span>: <span class="literal">false</span></span><br><span class="line"><span class="attr">_value</span>: <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="attr">value</span>: <span class="string">&quot;hello&quot;</span></span><br><span class="line">[[Prototype]]: <span class="built_in">Object</span></span><br><span class="line"></span><br><span class="line">  在这里我们看到了ref对象身上的一个属性 value,没错，我们存入的值就对应在value属性上，至于为什么直接<span class="keyword">return</span>出是Str而不是Str.value 。是因为Vue帮了我们</span><br><span class="line">一个忙，我们在这里可以简写，<span class="keyword">return</span>出去的Str 就相当于Str.value ，当然 非要写.value的形式也不是不可以。不过这里需要注意的是，在</span><br><span class="line">setup函数中操作Str中的数据不可以简写。</span><br></pre></td></tr></table></figure>

<ul>
<li><h6 id="响应式原理"><a href="#响应式原理" class="headerlink" title="响应式原理"></a>响应式原理</h6></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">   对于基本数据类型说完了它的基本用法，下面我们来说说他的响应式原理，也就是我们为什么非要用一个ref对象来接受数据，而不是直接就定义好一个字符</span><br><span class="line">串‘hello’然后去直接操作这个字符串？</span><br><span class="line"></span><br><span class="line">  对于ref函数，数据参数和它加工生成的ref对象二者存在着某种“契约”，我们把加工好的参数也就是ref对象交出去之后，我们直接操作修改的就是ref</span><br><span class="line">对象上的value属性，因为这个契约的存在，以至于在修改属性值的时候对应的源数据参数也会连同被修改，但在原数据被修改之前vue就会监听到我</span><br><span class="line">们修改了数据，立马进行解析模板更新页面，这就是ref对象的响应式原理。这里的契约其实就是Object.defineProperty的get( )和<span class="built_in">set</span>( )篇幅有</span><br><span class="line">限我们不对底层核心代码做示范.</span><br><span class="line"></span><br><span class="line">  我们知道了ref函数定义基本类型，下面会讲解reactive函数,该函数参数是对象类型和ref的对象类型参数有着千丝万缕的联系，所以学会reacti</span><br><span class="line">ve函数学会了ref函数存储的对象数据类型也就自然理解了。</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="reactive函数："><a href="#reactive函数：" class="headerlink" title="reactive函数："></a>reactive函数：</h3><p><strong>语法：const xxx = ref (源对象)<br>接受的数据类型：对象类型<br>作用：把参数加工成一个代理对象，全称为proxy对象<br>核心原理：基于Es6的Proxy实现，通过代理操作源对象，相比于reactive定义的浅层次响应式数据对象，reactive定义的是更深层次的响应式数据对象</strong></p>
<hr>
<h5 id="reactive对于对象类型的参数"><a href="#reactive对于对象类型的参数" class="headerlink" title="reactive对于对象类型的参数"></a>reactive对于对象类型的参数</h5><ul>
<li><h6 id="基本使用-1"><a href="#基本使用-1" class="headerlink" title="基本使用"></a>基本使用</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;Person.name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>薪水：&#123;&#123;Person.job.salary&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> p =&#123;</span><br><span class="line">      <span class="attr">name</span>:<span class="string">&#x27;Ben&#x27;</span>,</span><br><span class="line">      <span class="attr">job</span>:&#123;</span><br><span class="line">        <span class="attr">salary</span>:<span class="string">&#x27;30k&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> Person =reactive(p)</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">      Person</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">这里不同于上面的ref函数，参数是一个对象类型的数据，那么对于接受返回值的Person对象也会和上面的ref对象一样都是把数据对应到value属性上吗？</span><br><span class="line">带着这个疑问打印一下Person对象</span><br><span class="line"></span><br><span class="line"><span class="built_in">Proxy</span></span><br><span class="line">[[Handler]]: <span class="built_in">Object</span></span><br><span class="line">[[Target]]: <span class="built_in">Object</span></span><br><span class="line"><span class="attr">job</span>: &#123;<span class="attr">salary</span>: <span class="string">&quot;30k&quot;</span>&#125;</span><br><span class="line"><span class="attr">name</span>: <span class="string">&quot;Ben&quot;</span></span><br><span class="line">[[Prototype]]: <span class="built_in">Object</span></span><br><span class="line">[[IsRevoked]]: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">我们发现Person对象身上并没有value属性并且Person对象是一个proxy类型的对象，这里我们可以理解为Person是一个加强版的p对象，对于p来说Person是一个代理对象，所以我们可以</span><br><span class="line">直接访问到自身的属性，而不是和ref函数一样把数据对应到value属性上，所以我们<span class="keyword">return</span>出去的Person对象可以直接放在模板里读取属性</span><br></pre></td></tr></table></figure></li>
<li><h6 id="响应式原理-1"><a href="#响应式原理-1" class="headerlink" title="响应式原理"></a>响应式原理</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   reactive的响应式是更加“深层次”的，底层依赖于ES6中的Proxy实现，用reactive函数加工出来的对象都是Proxy对象，无论原数据对象里面有多少层对象他们都会被加工成Proxy</span><br><span class="line">类型对象(深层次)。它的响应式核心思想和ref是大同小异的，这里我们定义的Person对象来代理p对象，二者也会建立“契约”，我们在把Person对象<span class="built_in">return</span>出去</span><br><span class="line">后在我们操作修改Person对象的数据时，在原对象数据改变之前Vue都会监听到这一举动并且同时解析模板、更新页面。</span><br></pre></td></tr></table></figure>

<hr>
</li>
</ul>
<h5 id="Ref函数对于对象类型的参数"><a href="#Ref函数对于对象类型的参数" class="headerlink" title="Ref函数对于对象类型的参数"></a>Ref函数对于对象类型的参数</h5><p>说到这里大家会有个疑问，ref定义对象类型的数据和这个reactive函数有什么关系呢？</p>
<p>   ref对象只能去操作浅层次的数据，把基本数据类型当做自己的属性值，如果ref函数的参数是对象这种深层次的数据类型时它会求助一个人，这个人不是别人正是reactive函数，在底层Vue会把对象参数通过reactive函数加工成一个Proxy代理对象放到ref的value属性上</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;Person.name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>薪水：&#123;&#123;Person.job.salary&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123;reactive,ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> p =&#123;</span><br><span class="line">      <span class="attr">name</span>:<span class="string">&#x27;Ben&#x27;</span>,</span><br><span class="line">      <span class="attr">job</span>:&#123;</span><br><span class="line">        <span class="attr">salary</span>:<span class="string">&#x27;30k&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> Person =ref(p)</span><br><span class="line">    <span class="built_in">console</span>.log(Person)</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">      Person</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">打印Person对象的结果：</span><br><span class="line"></span><br><span class="line">RefImpl &#123;<span class="attr">_shallow</span>: <span class="literal">false</span>, <span class="attr">__v_isRef</span>: <span class="literal">true</span>, <span class="attr">_rawValue</span>: &#123;…&#125;, <span class="attr">_value</span>: <span class="built_in">Proxy</span>&#125;</span><br><span class="line"><span class="attr">__v_isRef</span>: <span class="literal">true</span></span><br><span class="line"><span class="attr">_rawValue</span>: &#123;<span class="attr">name</span>: <span class="string">&quot;Ben&quot;</span>, <span class="attr">job</span>: &#123;…&#125;&#125;</span><br><span class="line"><span class="attr">_shallow</span>: <span class="literal">false</span></span><br><span class="line"><span class="attr">_value</span>: <span class="built_in">Proxy</span> &#123;<span class="attr">name</span>: <span class="string">&quot;Ben&quot;</span>, <span class="attr">job</span>: &#123;…&#125;&#125;</span><br><span class="line"><span class="attr">value</span>: <span class="built_in">Proxy</span></span><br><span class="line">[[Handler]]: <span class="built_in">Object</span></span><br><span class="line">[[Target]]: <span class="built_in">Object</span></span><br><span class="line"><span class="attr">job</span>: &#123;<span class="attr">salary</span>: <span class="string">&quot;30k&quot;</span>&#125;</span><br><span class="line"><span class="attr">name</span>: <span class="string">&quot;Ben&quot;</span></span><br><span class="line">[[Prototype]]: <span class="built_in">Object</span></span><br><span class="line">[[IsRevoked]]: <span class="literal">false</span></span><br><span class="line">[[Prototype]]: <span class="built_in">Object</span></span><br><span class="line"></span><br><span class="line">我们可以很清楚的看到，value属性下对应的正是给p原数据对象加工生成<span class="built_in">Proxy</span>对象</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="区别："><a href="#区别：" class="headerlink" title="区别："></a>区别：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.存储类型：ref对象可以接受基本数据类型得数据也可以接受对象类型的数据，而reactive只可以接受对象类型的数据</span><br><span class="line"></span><br><span class="line">2.响应式：相比于ref对象reactive函数是更深层次的，ref函数参数为对象类型时依赖的也是reactive函数</span><br><span class="line"></span><br><span class="line">3.用法：Proxy代理对象的数据键值对是和原数据对象的键值对一一对应的，在使用时可以直接使用 对象(接受返回值的对象).键名 的形式，ref对象会把数据参数对应到自己</span><br><span class="line"></span><br><span class="line">value属性上，在模板里我们可以直接省略.value的形式，这看起来好像是“把源数据赋值给了ref类型的变量，可以直接在模板上使用这个ref类型的变量”</span><br><span class="line"></span><br><span class="line">4.响应式原理：ref的响应式原理是依赖于Object.defineProperty( )的get( )和<span class="built_in">set</span>( )而reactive的响应式原理是依赖于ES6中的Proxy。</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">博主</p>
  <div class="site-description" itemprop="description">记录生活，努力学习。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">博主</span>





</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="إجمالي الزوار">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="إجمالي المشاهدات">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  















  

  


</body>
</html>
